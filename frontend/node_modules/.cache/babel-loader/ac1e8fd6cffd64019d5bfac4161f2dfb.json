{"ast":null,"code":"var _jsxFileName = \"/home/reia/cop4331LargeProjectApp/frontend/src/components/RespondPanel.js\";\nimport React, { useState, useEffect } from 'react';\n\nvar jwt = require('jsonwebtoken');\n\nconst BASE_URL = 'https://cop4331-g25.herokuapp.com/';\n\nfunction RespondPanel() {\n  var reasonGiven; //  password for token encryption\n\n  var ePassword = \"shhhhh\";\n  const [approvalValue, setAppVal] = useState('');\n  useEffect(() => {\n    setAppVal(\"true\");\n  }, []);\n\n  const doResponse = async event => {\n    event.preventDefault();\n\n    var _tei = localStorage.getItem('trip_edit_data');\n\n    var tei = JSON.parse(_tei);\n    var tID = tei.idToEdit;\n    var uID = tei.uID;\n    var aID = tei.aID; // alert(tID + \" \" + uID + \" \" + aID + \" \" + approvalValue + \" \" + reasonGiven.value);\n\n    if (approvalValue === \"true\") {\n      var js = '{\"_id\":\"' + tID + '\",\"newData\":{' // + '\"userId\":\"' \n      // + uID\n      // + '\",\"adminId\":\"'\n      // + aID\n      + '\"isApproved\":' + approvalValue + ',\"isNew\":' + true + ',\"comments\":\"' + reasonGiven.value + '\"}}'; // alert(js);        \n    } else {\n      var js = '{\"_id\":\"' + tID + '\",\"newData\":{' // + '\"userId\":\"' \n      // + uID\n      // + '\",\"adminId\":\"'\n      // + aID\n      + '\"isApproved\":' + approvalValue + ',\"isNew\":' + false + ',\"comments\":\"' + reasonGiven.value + '\"}}'; // alert(js);\n    }\n\n    try {\n      var token = jwt.sign(js, ePassword);\n      var tokenJSON = '{\"token\":\"' + token + '\"}';\n      const response = await fetch(BASE_URL + 'api/editTrip', {\n        method: 'POST',\n        body: tokenJSON,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      var res = jwt.verify(JSON.parse(await response.text()).token, ePassword);\n      document.getElementById(\"RespondPanel\").style.display = \"none\";\n      document.getElementById(\"PendingPanel\").style.display = \"block\"; // show navbar\n\n      document.getElementById(\"NavWrapper\").style.display = \"block\";\n      window.location.reload();\n    } catch (e) {\n      alert(e.toString());\n      return;\n    }\n  }; // swap back to pendingPanel\n\n\n  const goToPendingPanel = event => {\n    event.preventDefault();\n    document.getElementById(\"RespondPanel\").style.display = \"none\";\n    document.getElementById(\"PendingPanel\").style.display = \"block\"; // show navbar\n\n    document.getElementById(\"NavWrapper\").style.display = \"block\";\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"RespondPanel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: doResponse,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    id: \"res-inner-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, \"Respond to Trip Request\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 74\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 80\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    id: \"resAppLabel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, \"Accept\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"radio\",\n    class: \"radio\",\n    id: \"resApprove\",\n    name: \"status\",\n    value: \"true\",\n    checked: approvalValue === \"true\",\n    onClick: () => setAppVal(\"true\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 169\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    id: \"resDenLabel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, \"Deny\", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"radio\",\n    class: \"radio\",\n    id: \"resDeny\",\n    name: \"status\",\n    value: \"false\",\n    checked: approvalValue === \"false\",\n    onClick: () => setAppVal(\"false\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 169\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"resReason\",\n    placeholder: \"Reason\",\n    ref: c => reasonGiven = c,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 103\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    id: \"resSubmit\",\n    class: \"buttons\",\n    onClick: doResponse,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, \"Send Response\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 113\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 119\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    id: \"resCancel\",\n    class: \"buttons\",\n    onClick: goToPendingPanel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }, \" Cancel \"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 114\n    }\n  })));\n}\n\n;\nexport default RespondPanel;","map":{"version":3,"sources":["/home/reia/cop4331LargeProjectApp/frontend/src/components/RespondPanel.js"],"names":["React","useState","useEffect","jwt","require","BASE_URL","RespondPanel","reasonGiven","ePassword","approvalValue","setAppVal","doResponse","event","preventDefault","_tei","localStorage","getItem","tei","JSON","parse","tID","idToEdit","uID","aID","js","value","token","sign","tokenJSON","response","fetch","method","body","headers","res","verify","text","document","getElementById","style","display","window","location","reload","e","alert","toString","goToPendingPanel","c"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nvar jwt = require('jsonwebtoken');\n\nconst BASE_URL = 'https://cop4331-g25.herokuapp.com/';\n\nfunction RespondPanel() {\n\n    var reasonGiven;\n\n    //  password for token encryption\n    var ePassword = \"shhhhh\";\n\n    const [approvalValue, setAppVal] = useState('');\n\n    useEffect(() => {\n        setAppVal(\"true\");\n    }, []);\n\n\n    const doResponse = async event => {\n        event.preventDefault();\n\n        var _tei = localStorage.getItem('trip_edit_data');\n        var tei = JSON.parse(_tei);\n        var tID = tei.idToEdit;\n        var uID = tei.uID;\n        var aID = tei.aID;\n\n        // alert(tID + \" \" + uID + \" \" + aID + \" \" + approvalValue + \" \" + reasonGiven.value);\n\n        if (approvalValue === \"true\") {\n            var js = '{\"_id\":\"'\n                + tID\n                + '\",\"newData\":{'\n                // + '\"userId\":\"' \n                // + uID\n                // + '\",\"adminId\":\"'\n                // + aID\n                + '\"isApproved\":'\n                + approvalValue\n                + ',\"isNew\":' + true\n                + ',\"comments\":\"' + reasonGiven.value + '\"}}';\n\n            // alert(js);        \n        }\n\n        else {\n            var js = '{\"_id\":\"'\n                + tID\n                + '\",\"newData\":{'\n                // + '\"userId\":\"' \n                // + uID\n                // + '\",\"adminId\":\"'\n                // + aID\n                + '\"isApproved\":'\n                + approvalValue\n                + ',\"isNew\":' + false\n                + ',\"comments\":\"' + reasonGiven.value + '\"}}';\n\n            // alert(js);\n        }\n\n\n        try {\n            var token = jwt.sign(js, ePassword);\n\n            var tokenJSON = '{\"token\":\"' + token + '\"}';\n\n            const response = await fetch(BASE_URL + 'api/editTrip',\n                { method: 'POST', body: tokenJSON, headers: { 'Content-Type': 'application/json' } });\n\n            var res = jwt.verify(JSON.parse(await response.text()).token, ePassword);\n\n            document.getElementById(\"RespondPanel\").style.display = \"none\";\n            document.getElementById(\"PendingPanel\").style.display = \"block\";\n\n            // show navbar\n            document.getElementById(\"NavWrapper\").style.display = \"block\";\n\n            window.location.reload();\n        }\n        catch (e) {\n            alert(e.toString());\n            return;\n        }\n    }\n\n    // swap back to pendingPanel\n    const goToPendingPanel = event => {\n        event.preventDefault();\n\n        document.getElementById(\"RespondPanel\").style.display = \"none\";\n        document.getElementById(\"PendingPanel\").style.display = \"block\";\n\n        // show navbar\n        document.getElementById(\"NavWrapper\").style.display = \"block\";\n    }\n\n\n    return (\n        <div id=\"RespondPanel\">\n            <form onSubmit={doResponse}>\n                <span id=\"res-inner-title\">Respond to Trip Request</span><br /><br />\n                <label id=\"resAppLabel\">\n                    Accept\n                    <input type=\"radio\" class=\"radio\" id=\"resApprove\" name=\"status\" value=\"true\" checked={approvalValue === \"true\"} onClick={() => setAppVal(\"true\")} /><br />\n                </label>\n\n                <label id=\"resDenLabel\">\n                    Deny\n                    <input type=\"radio\" class=\"radio\" id=\"resDeny\" name=\"status\" value=\"false\" checked={approvalValue === \"false\"} onClick={() => setAppVal(\"false\")} /><br />\n                </label>\n                <input type=\"text\" id=\"resReason\" placeholder=\"Reason\" ref={(c) => reasonGiven = c} /><br />\n                <button type=\"button\" id=\"resSubmit\" class=\"buttons\" onClick={doResponse}>Send Response</button><br /><br />\n                <button type=\"button\" id=\"resCancel\" class=\"buttons\" onClick={goToPendingPanel}> Cancel </button><br />\n            </form>\n        </div>\n    );\n};\n\nexport default RespondPanel;"]},"metadata":{},"sourceType":"module"}