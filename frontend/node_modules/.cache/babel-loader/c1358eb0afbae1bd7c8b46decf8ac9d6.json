{"ast":null,"code":"var _jsxFileName = \"/home/reia/cop4331LargeProjectApp/frontend/src/components/Signup.js\";\nimport React, { useState } from 'react';\n\nvar jwt = require('jsonwebtoken');\n\nconst BASE_URL = 'https://cop4331-g25.herokuapp.com/';\n\nfunction Signup() {\n  var firstName;\n  var lastName;\n  var email;\n  var adminId;\n  var password;\n  var passwordConfirm; //  password for token encryption\n\n  var ePassword = \"shhhhh\";\n  const [message, setMessage] = useState('');\n\n  const doSignup = async event => {\n    event.preventDefault(); // check confirm password\n\n    if (password.value != passwordConfirm.value) {\n      setMessage(\"Passwords do not match\");\n      return;\n    } // check for invalid password / adminId\n\n\n    if (password.value == null || password.value == \"\") {\n      setMessage(\"Invalid password\");\n      return;\n    }\n\n    if (adminId.value == null || adminId.value == \"\") {\n      setMessage(\"Invalid admin ID\");\n      return;\n    }\n\n    var js = '{\"userName\":\"' + adminId.value + '\",\"Password\":\"' + password.value + '\",\"firstName\":\"' + firstName.value + '\",\"lastName\":\"' + lastName.value + '\",\"email\":\"' + email.value + '\"}';\n\n    try {\n      var token = jwt.sign(js, ePassword);\n      var tokenJSON = '{\"token\":\"' + token + '\"}';\n      const response = await fetch(BASE_URL + 'api/registerAdmin', {\n        method: 'POST',\n        body: tokenJSON,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }); // verify returned token\n\n      var res = jwt.verify(JSON.parse(await response.text()).token, ePassword);\n\n      if (res.error != \"\") {\n        setMessage(res.error);\n      } else {\n        var user = {\n          firstName: firstName.value,\n          lastName: lastName.value,\n          id: res.id,\n          userName: adminId.value\n        };\n        localStorage.setItem('user_data', JSON.stringify(user));\n        document.getElementById('loginResult').innerHTML = \"Account made, please check your email for verification\";\n        document.getElementById(\"loginDiv\").style.display = \"block\";\n        document.getElementById(\"signupDiv\").style.display = \"none\";\n      }\n    } catch (e) {\n      alert(e.toString());\n      return;\n    }\n  }; // swap to login\n\n\n  const gotoLogin = event => {\n    event.preventDefault();\n    document.getElementById(\"loginDiv\").style.display = \"block\";\n    document.getElementById(\"signupDiv\").style.display = \"none\";\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"signupDiv\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: doSignup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    id: \"inner-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, \"Register Now!\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 52\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 58\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"signupFirstName\",\n    placeholder: \"First Name\",\n    ref: c => firstName = c,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 103\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"signupLastName\",\n    placeholder: \"Last Name\",\n    ref: c => lastName = c,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 100\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"signupEmail\",\n    placeholder: \"Email\",\n    ref: c => email = c,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 90\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"signupUsername\",\n    placeholder: \"Admin Username\",\n    ref: c => adminId = c,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 104\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"signupPassword\",\n    placeholder: \"Password\",\n    ref: c => password = c,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 103\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"signupPasswordConfirm\",\n    placeholder: \"Confirm Password\",\n    ref: c => passwordConfirm = c,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 125\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    id: \"signupButton\",\n    class: \"buttons\",\n    onClick: doSignup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, \" Register \"), \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 104\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    id: \"switchToLogin\",\n    class: \"buttons\",\n    onClick: gotoLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, \"Back to login\")), /*#__PURE__*/React.createElement(\"span\", {\n    id: \"signupResult\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }, message));\n}\n\n;\nexport default Signup;","map":{"version":3,"sources":["/home/reia/cop4331LargeProjectApp/frontend/src/components/Signup.js"],"names":["React","useState","jwt","require","BASE_URL","Signup","firstName","lastName","email","adminId","password","passwordConfirm","ePassword","message","setMessage","doSignup","event","preventDefault","value","js","token","sign","tokenJSON","response","fetch","method","body","headers","res","verify","JSON","parse","text","error","user","id","userName","localStorage","setItem","stringify","document","getElementById","innerHTML","style","display","e","alert","toString","gotoLogin","c"],"mappings":";AACA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;;AACA,IAAIC,GAAG,GAAGC,OAAO,CAAC,cAAD,CAAjB;;AAEA,MAAMC,QAAQ,GAAG,oCAAjB;;AAEA,SAASC,MAAT,GAAkB;AAEhB,MAAIC,SAAJ;AACA,MAAIC,QAAJ;AACA,MAAIC,KAAJ;AACA,MAAIC,OAAJ;AACA,MAAIC,QAAJ;AACA,MAAIC,eAAJ,CAPgB,CAShB;;AACA,MAAIC,SAAS,GAAG,QAAhB;AAEA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBb,QAAQ,CAAC,EAAD,CAAtC;;AAGA,QAAMc,QAAQ,GAAG,MAAMC,KAAN,IAAe;AAC9BA,IAAAA,KAAK,CAACC,cAAN,GAD8B,CAG9B;;AACA,QAAIP,QAAQ,CAACQ,KAAT,IAAkBP,eAAe,CAACO,KAAtC,EAA6C;AAC3CJ,MAAAA,UAAU,CAAC,wBAAD,CAAV;AACA;AACD,KAP6B,CAS9B;;;AACA,QAAIJ,QAAQ,CAACQ,KAAT,IAAkB,IAAlB,IAA0BR,QAAQ,CAACQ,KAAT,IAAkB,EAAhD,EAAoD;AAClDJ,MAAAA,UAAU,CAAC,kBAAD,CAAV;AACA;AACD;;AAED,QAAIL,OAAO,CAACS,KAAR,IAAiB,IAAjB,IAAyBT,OAAO,CAACS,KAAR,IAAiB,EAA9C,EAAkD;AAChDJ,MAAAA,UAAU,CAAC,kBAAD,CAAV;AACA;AACD;;AAED,QAAIK,EAAE,GAAG,kBACLV,OAAO,CAACS,KADH,GAEL,gBAFK,GAGLR,QAAQ,CAACQ,KAHJ,GAIL,iBAJK,GAKLZ,SAAS,CAACY,KALL,GAML,gBANK,GAOLX,QAAQ,CAACW,KAPJ,GAQL,aARK,GASLV,KAAK,CAACU,KATD,GASS,IATlB;;AAWA,QAAI;AACF,UAAIE,KAAK,GAAGlB,GAAG,CAACmB,IAAJ,CAASF,EAAT,EAAaP,SAAb,CAAZ;AAEA,UAAIU,SAAS,GAAG,eAAeF,KAAf,GAAuB,IAAvC;AAEA,YAAMG,QAAQ,GAAG,MAAMC,KAAK,CAACpB,QAAQ,GAAG,mBAAZ,EAC1B;AAAEqB,QAAAA,MAAM,EAAE,MAAV;AAAkBC,QAAAA,IAAI,EAAEJ,SAAxB;AAAmCK,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB;AAA5C,OAD0B,CAA5B,CALE,CAQF;;AACA,UAAIC,GAAG,GAAG1B,GAAG,CAAC2B,MAAJ,CAAWC,IAAI,CAACC,KAAL,CAAW,MAAMR,QAAQ,CAACS,IAAT,EAAjB,EAAkCZ,KAA7C,EAAoDR,SAApD,CAAV;;AAEA,UAAIgB,GAAG,CAACK,KAAJ,IAAa,EAAjB,EAAqB;AACnBnB,QAAAA,UAAU,CAACc,GAAG,CAACK,KAAL,CAAV;AACD,OAFD,MAGK;AACH,YAAIC,IAAI,GAAG;AAAE5B,UAAAA,SAAS,EAAEA,SAAS,CAACY,KAAvB;AAA8BX,UAAAA,QAAQ,EAAEA,QAAQ,CAACW,KAAjD;AAAwDiB,UAAAA,EAAE,EAAEP,GAAG,CAACO,EAAhE;AAAoEC,UAAAA,QAAQ,EAAE3B,OAAO,CAACS;AAAtF,SAAX;AACAmB,QAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCR,IAAI,CAACS,SAAL,CAAeL,IAAf,CAAlC;AAEAM,QAAAA,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,SAAvC,GAAmD,wDAAnD;AAEAF,QAAAA,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCE,KAApC,CAA0CC,OAA1C,GAAoD,OAApD;AACAJ,QAAAA,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCE,KAArC,CAA2CC,OAA3C,GAAqD,MAArD;AACD;AACF,KAvBD,CAwBA,OAAOC,CAAP,EAAU;AACRC,MAAAA,KAAK,CAACD,CAAC,CAACE,QAAF,EAAD,CAAL;AACA;AACD;AACF,GA3DD,CAfgB,CA4EhB;;;AACA,QAAMC,SAAS,GAAGhC,KAAK,IAAI;AACzBA,IAAAA,KAAK,CAACC,cAAN;AAEAuB,IAAAA,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCE,KAApC,CAA0CC,OAA1C,GAAoD,OAApD;AACAJ,IAAAA,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCE,KAArC,CAA2CC,OAA3C,GAAqD,MAArD;AACD,GALD;;AAQA,sBACE;AAAK,IAAA,EAAE,EAAC,WAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,QAAQ,EAAE7B,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,EAAE,EAAC,aAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAC6C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAD7C,eACmD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADnD,eAEE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,EAAE,EAAC,iBAAtB;AAAwC,IAAA,WAAW,EAAC,YAApD;AAAiE,IAAA,GAAG,EAAGkC,CAAD,IAAO3C,SAAS,GAAG2C,CAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAEgG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFhG,eAGE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,EAAE,EAAC,gBAAtB;AAAuC,IAAA,WAAW,EAAC,WAAnD;AAA+D,IAAA,GAAG,EAAGA,CAAD,IAAO1C,QAAQ,GAAG0C,CAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,eAG6F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAH7F,eAIE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,EAAE,EAAC,aAAtB;AAAoC,IAAA,WAAW,EAAC,OAAhD;AAAwD,IAAA,GAAG,EAAGA,CAAD,IAAOzC,KAAK,GAAGyC,CAA5E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,eAImF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJnF,eAKE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,EAAE,EAAC,gBAAtB;AAAuC,IAAA,WAAW,EAAC,gBAAnD;AAAoE,IAAA,GAAG,EAAGA,CAAD,IAAOxC,OAAO,GAAGwC,CAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,eAKiG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALjG,eAME;AAAO,IAAA,IAAI,EAAC,UAAZ;AAAuB,IAAA,EAAE,EAAC,gBAA1B;AAA2C,IAAA,WAAW,EAAC,UAAvD;AAAkE,IAAA,GAAG,EAAGA,CAAD,IAAOvC,QAAQ,GAAGuC,CAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,eAMgG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANhG,eAOE;AAAO,IAAA,IAAI,EAAC,UAAZ;AAAuB,IAAA,EAAE,EAAC,uBAA1B;AAAkD,IAAA,WAAW,EAAC,kBAA9D;AAAiF,IAAA,GAAG,EAAGA,CAAD,IAAOtC,eAAe,GAAGsC,CAA/G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,eAOsH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPtH,eAQE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,EAAE,EAAC,cAAzB;AAAwC,IAAA,KAAK,EAAC,SAA9C;AAAwD,IAAA,OAAO,EAAElC,QAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBARF,oBAQiG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARjG,eASE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,EAAE,EAAC,eAAzB;AAAyC,IAAA,KAAK,EAAC,SAA/C;AAAyD,IAAA,OAAO,EAAEiC,SAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBATF,CADF,eAYE;AAAM,IAAA,EAAE,EAAC,cAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAyBnC,OAAzB,CAZF,CADF;AAiBD;;AAAA;AAED,eAAeR,MAAf","sourcesContent":["\nimport React, { useState } from 'react';\nvar jwt = require('jsonwebtoken');\n\nconst BASE_URL = 'https://cop4331-g25.herokuapp.com/';\n\nfunction Signup() {\n\n  var firstName;\n  var lastName;\n  var email;\n  var adminId;\n  var password;\n  var passwordConfirm;\n\n  //  password for token encryption\n  var ePassword = \"shhhhh\";\n\n  const [message, setMessage] = useState('');\n\n\n  const doSignup = async event => {\n    event.preventDefault();\n\n    // check confirm password\n    if (password.value != passwordConfirm.value) {\n      setMessage(\"Passwords do not match\")\n      return;\n    }\n\n    // check for invalid password / adminId\n    if (password.value == null || password.value == \"\") {\n      setMessage(\"Invalid password\");\n      return;\n    }\n\n    if (adminId.value == null || adminId.value == \"\") {\n      setMessage(\"Invalid admin ID\");\n      return;\n    }\n\n    var js = '{\"userName\":\"'\n      + adminId.value\n      + '\",\"Password\":\"'\n      + password.value\n      + '\",\"firstName\":\"'\n      + firstName.value\n      + '\",\"lastName\":\"'\n      + lastName.value\n      + '\",\"email\":\"'\n      + email.value + '\"}';\n\n    try {\n      var token = jwt.sign(js, ePassword);\n\n      var tokenJSON = '{\"token\":\"' + token + '\"}';\n\n      const response = await fetch(BASE_URL + 'api/registerAdmin',\n        { method: 'POST', body: tokenJSON, headers: { 'Content-Type': 'application/json' } });\n\n      // verify returned token\n      var res = jwt.verify(JSON.parse(await response.text()).token, ePassword);\n\n      if (res.error != \"\") {\n        setMessage(res.error);\n      }\n      else {\n        var user = { firstName: firstName.value, lastName: lastName.value, id: res.id, userName: adminId.value }\n        localStorage.setItem('user_data', JSON.stringify(user));\n\n        document.getElementById('loginResult').innerHTML = \"Account made, please check your email for verification\";\n        \n        document.getElementById(\"loginDiv\").style.display = \"block\";\n        document.getElementById(\"signupDiv\").style.display = \"none\";\n      }\n    }\n    catch (e) {\n      alert(e.toString());\n      return;\n    }\n  }\n\n  // swap to login\n  const gotoLogin = event => {\n    event.preventDefault();\n\n    document.getElementById(\"loginDiv\").style.display = \"block\";\n    document.getElementById(\"signupDiv\").style.display = \"none\";\n  }\n\n\n  return (\n    <div id=\"signupDiv\">\n      <form onSubmit={doSignup}>\n        <span id=\"inner-title\">Register Now!</span><br /><br />\n        <input type=\"text\" id=\"signupFirstName\" placeholder=\"First Name\" ref={(c) => firstName = c} /><br />\n        <input type=\"text\" id=\"signupLastName\" placeholder=\"Last Name\" ref={(c) => lastName = c} /><br />\n        <input type=\"text\" id=\"signupEmail\" placeholder=\"Email\" ref={(c) => email = c} /><br />\n        <input type=\"text\" id=\"signupUsername\" placeholder=\"Admin Username\" ref={(c) => adminId = c} /><br />\n        <input type=\"password\" id=\"signupPassword\" placeholder=\"Password\" ref={(c) => password = c} /><br />\n        <input type=\"password\" id=\"signupPasswordConfirm\" placeholder=\"Confirm Password\" ref={(c) => passwordConfirm = c} /><br />\n        <button type=\"button\" id=\"signupButton\" class=\"buttons\" onClick={doSignup}> Register </button> <br />\n        <button type=\"button\" id=\"switchToLogin\" class=\"buttons\" onClick={gotoLogin}>Back to login</button>\n      </form>\n      <span id=\"signupResult\">{message}</span>\n    </div>\n\n  );\n};\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}